(this["webpackJsonpfly-game"]=this["webpackJsonpfly-game"]||[]).push([[0],{1483:function(e,t,i){"use strict";i.r(t);var s=i(87),a=i.n(s),n=i(557),l=i.n(n),h=(i(563),i(564),i(25)),o=i.n(h);var r=Math.max(document.documentElement.clientWidth,window.innerWidth),d=Math.max(document.documentElement.clientHeight,window.innerHeight),m=function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0,s=0;s<t.length;s++)if(e.indexOf(t[s])>0){i=!1;break}return i}();console.log(document.body.clientWidth,window.innerHeight);var c={type:o.a.AUTO,width:m?525:r,height:m?900:d,backgroundColor:"#2d2d2d",parent:"game",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}}},u=i(36),y=i(37),p=i(47),f=i(46),b=i(48),g=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"preload",value:function(){this.load.image("loading","assets/preloader.gif")}},{key:"create",value:function(){this.scene.start("load")}}]),t}(o.a.Scene),v=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"preload",value:function(){var e=this.add.sprite(this.sys.canvas.width/2-110,this.sys.canvas.height/2,"loading"),t=this.make.text({x:this.sys.canvas.width/2,y:this.sys.canvas.height/2-20,text:"Loading...",style:{font:"20px monospace",fill:"#ffffff"}});t.setOrigin(.5,.5),e.setOrigin(0,0),this.load.on("progress",(function(i){e.displayWidth=220*i,t.setText("Loading ".concat(parseInt(100*i)+"%"))})),this.load.on("complete",(function(){t.destroy(),e.destroy(),this.scene.start("main")}),this),this.load.image("background","assets/bg.jpg"),this.load.spritesheet("myplane","assets/myplane.png",{frameWidth:40,frameHeight:40}),this.load.spritesheet("startbutton","assets/startbutton.png",{frameWidth:100,frameHeight:40}),this.load.spritesheet("replaybutton","assets/replaybutton.png",{frameWidth:80,frameHeight:30}),this.load.spritesheet("sharebutton","assets/sharebutton.png",{frameWidth:80,frameHeight:30}),this.load.image("mybullet","assets/mybullet.png"),this.load.image("bullet","assets/bullet.png"),this.load.image("enemy1","assets/enemy1.png"),this.load.image("enemy2","assets/enemy2.png"),this.load.image("enemy3","assets/enemy3.png"),this.load.spritesheet("explode1","assets/explode1.png",{frameWidth:20,frameHeight:20}),this.load.spritesheet("explode2","assets/explode2.png",{frameWidth:30,frameHeight:30}),this.load.spritesheet("explode3","assets/explode3.png",{frameWidth:50,frameHeight:50}),this.load.spritesheet("myexplode","assets/myexplode.png",{frameWidth:40,frameHeight:40}),this.load.image("award","assets/award.png"),this.load.audio("normalback","assets/normalback.mp3"),this.load.audio("playback","assets/playback.mp3"),this.load.audio("fashe","assets/fashe.mp3"),this.load.audio("crash1","assets/crash1.mp3"),this.load.audio("crash2","assets/crash2.mp3"),this.load.audio("crash3","assets/crash3.mp3"),this.load.audio("ao","assets/ao.mp3"),this.load.audio("pi","assets/pi.mp3"),this.load.audio("deng","assets/deng.mp3")}},{key:"create",value:function(){}}]),t}(o.a.Scene),w=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this;this.width=this.sys.canvas.width,this.height=this.sys.canvas.height,this.bg=this.add.tileSprite(0,0,2*this.width,2*this.height,"background"),this.myPlan=this.add.sprite(this.width/2,this.height/2+100,"myplane").setOrigin(.5,.5),this.anims.create({key:"fly",frames:this.anims.generateFrameNumbers("myplane",{start:0,end:3}),frameRate:10,repeat:-1}),this.myPlan.anims.play("fly",!0),this.startbutton=this.add.sprite(this.width/2,this.height/2+200,"startbutton").setInteractive(),this.anims.create({key:"buttomDown",frames:[{key:"startbutton",frame:1}],frameRate:20}),this.anims.create({key:"buttomUp",frames:[{key:"startbutton",frame:0}],frameRate:20}),this.startbutton.on("pointerdown",(function(t){e.startbutton.anims.play("buttomDown")})),this.startbutton.on("pointerup",(function(t){e.startbutton.anims.play("buttomUp"),e.scene.start("start"),e.normalback.pause()})),this.normalback=this.sound.add("normalback",{loop:!0}),this.copyright=this.add.text(this.width/2,this.height-40,"Simon contribute",{fontSize:"16px",fill:"#000"}).setOrigin(.5,.5)}}]),t}(o.a.Scene),k=function(){return{enemy1:{game:this,selfPic:"enemy1",bulletPic:"bullet",explodePic:"explode1",selfPool:10,bulletsPool:50,explodePool:10,life:2,velocity:50,bulletX:9,bulletY:20,bulletVelocity:200,selfTimeInterval:2,bulletTimeInterval:1e3,score:10,firesound:this.firesound,crashsound:this.crash1},enemy2:{game:this,selfPic:"enemy2",bulletPic:"bullet",explodePic:"explode2",selfPool:10,bulletsPool:50,explodePool:10,life:3,velocity:40,bulletX:13,bulletY:30,bulletVelocity:250,selfTimeInterval:3,bulletTimeInterval:1200,score:20,firesound:this.firesound,crashsound:this.crash2},enemy3:{game:this,selfPic:"enemy3",bulletPic:"bullet",explodePic:"explode3",selfPool:5,bulletsPool:25,explodePool:5,life:10,velocity:30,bulletX:22,bulletY:50,bulletVelocity:300,selfTimeInterval:10,bulletTimeInterval:1500,score:50,firesound:this.firesound,crashsound:this.crash3}}},x=function(){function e(t){Object(u.a)(this,e),this.config=t}return Object(y.a)(e,[{key:"init",value:function(){var e=this.config;this.enemys=e.game.physics.add.group(),this.enemyBullets=e.game.physics.add.group(),this.maxWidth=e.game.game.config.width-e.bulletY/2,e.game.time.addEvent({startAt:1,delay:1e3*e.selfTimeInterval,callback:this.generateEnemy,callbackScope:this,loop:!0}),this.explosions=e.game.add.group(),e.game.anims.create({key:e.explodePic,frames:e.game.anims.generateFrameNumbers(e.explodePic,{start:0,end:2}),frameRate:10,repeat:1,hideOnComplete:!0})}},{key:"generateEnemy",value:function(){var e=this.config;this.enemy=this.enemys.getFirstDead(!0,o.a.Math.Between(0,this.maxWidth),0,e.selfPic).setOrigin(0,0),this.enemy.enableBody(!0,o.a.Math.Between(0,this.maxWidth),0,!0,!0),this.outOfBoundsKill(this.enemy),this.enemy.life=e.life,this.enemy.setVelocity(0,e.velocity)}},{key:"enemyFire",value:function(){var e=this,t=this.config;this.enemys.children.iterate((function(i){if(i.active&&(new Date).getTime()>(i.bulletTime||0)){var s=e.enemyBullets.getFirstDead(!0,i.x,i.y,t.bulletPic);try{t.firesound.play()}catch(a){}e.outOfBoundsKill(s),s.enableBody(!0,i.x+i.width/2,i.y+i.height/2,!0,!0),s.setVelocity(0,t.bulletVelocity),i.bulletTime=(new Date).getTime()+t.bulletTimeInterval}}))}},{key:"hitEnemy",value:function(e,t){var i=this.config;if(e.setActive(!1),e.setVisible(!1),t.life--,t.life<=0){try{i.crashsound.play()}catch(a){}var s=this.explosions.getFirstDead(!0,t.x,t.y,i.explodePic).setOrigin(0,0);s.setPosition(t.x,t.y),t.disableBody(!0,!0),s.setActive(!0),s.setVisible(!0),s.anims.play(i.explodePic,!0),s.on("animationcomplete",(function(){s.setActive(!1)}),this),i.game.updateScore(i.score)}}},{key:"outOfBoundsKill",value:function(e){e.setCollideWorldBounds(!0),e.body.onWorldBounds=!0,e.body.world.on("worldbounds",(function(e){e.gameObject===this&&(this.setActive(!1),this.setVisible(!1))}),e)}}]),e}(),O=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this;this.startGame=!1,this.bg=this.add.tileSprite(0,0,2*c.width,2*c.height,"background"),this.myplan=this.physics.add.sprite(c.width/2,c.height/2+100,"myplane").setOrigin(.5,.5).setInteractive(),this.myplan.setCollideWorldBounds(!0),this.anims.create({key:"fly",frames:this.anims.generateFrameNumbers("myplane",{start:0,end:2}),frameRate:10,repeat:-1}),this.myplan.anims.play("fly",!0),this.myplan.level=2,this.tweens.add({targets:this.myplan,duration:1e3,y:c.height-60,delay:0,ease:"Sine.easeInOut",repeat:0,yoyo:!1,onComplete:function(){e.onStart()}}),this.playback=this.sound.add("playback",{loop:!0}),this.playback.play(),this.pi=this.sound.add("pi"),this.firesound=this.sound.add("fashe"),this.crash1=this.sound.add("crash1"),this.crash2=this.sound.add("crash1"),this.crash3=this.sound.add("crash1"),this.ao=this.sound.add("ao"),this.deng=this.sound.add("deng")}},{key:"update",value:function(){this.bg.tilePositionY-=.5,this.startGame&&(this.myFireBullet(),this.enemy1&&this.enemy1.enemyFire(),this.enemy2&&this.enemy2.enemyFire(),this.enemy3&&this.enemy3.enemyFire())}},{key:"onStart",value:function(){this.mybullets=this.physics.add.group(),this.bulletTime=0,this.input.setDraggable(this.myplan),this.input.on("drag",(function(e,t,i,s){t.x=i,t.y=s})),this.awards=this.physics.add.group(),this.awardMaxWidth=c.width-20,this.time.addEvent({delay:3e4,callback:this.generateAward,callbackScope:this,loop:!0}),this.score=0,this.text=this.add.text(16,16,"Score: 0",{fontSize:"16px",fill:"#000"});var e=k.call(this);this.enemy1=new x(e.enemy1),this.enemy2=new x(e.enemy2),this.enemy3=new x(e.enemy3),this.enemy1.init(),this.enemy2.init(),this.enemy3.init(),this.physics.add.overlap(this.mybullets,this.enemy1.enemys,this.enemy1.hitEnemy,null,this.enemy1),this.physics.add.overlap(this.enemy1.enemys,this.myplan,this.crashMyplane,null,this),this.physics.add.overlap(this.enemy1.enemyBullets,this.myplan,this.hitMyplane,null,this),this.physics.add.overlap(this.mybullets,this.enemy2.enemys,this.enemy2.hitEnemy,null,this.enemy2),this.physics.add.overlap(this.enemy2.enemys,this.myplan,this.crashMyplane,null,this),this.physics.add.overlap(this.enemy2.enemyBullets,this.myplan,this.hitMyplane,null,this),this.physics.add.overlap(this.mybullets,this.enemy3.enemys,this.enemy3.hitEnemy,null,this.enemy3),this.physics.add.overlap(this.enemy3.enemys,this.myplan,this.crashMyplane,null,this),this.physics.add.overlap(this.enemy3.enemyBullets,this.myplan,this.hitMyplane,null,this),this.physics.add.overlap(this.awards,this.myplan,this.getAward,null,this),this.startGame=!0}},{key:"generateAward",value:function(){var e=this.awards.getFirstDead(!0,o.a.Math.Between(0,this.awardMaxWidth),0,"award").setOrigin(0,0);e.enableBody(!0,o.a.Math.Between(0,this.awardMaxWidth),0,!0,!0),this.outOfBoundsKill(e),e.setVelocity(0,500)}},{key:"myFireBullet",value:function(){if(this.myplan.active&&(new Date).getTime()>this.bulletTime){try{this.pi.play()}catch(e){}this.fireOneBullet(0,-400),this.myplan.level>=2&&(this.fireOneBullet(-40,-400),this.fireOneBullet(40,-400)),this.myplan.level>=3&&(this.fireOneBullet(-80,-400),this.fireOneBullet(80,-400))}}},{key:"outOfBoundsKill",value:function(e){e.setCollideWorldBounds(!0),e.body.onWorldBounds=!0,e.body.world.on("worldbounds",(function(e){e.gameObject===this&&(this.setActive(!1),this.setVisible(!1))}),e)}},{key:"fireOneBullet",value:function(e,t){var i=this.mybullets.getFirstDead(!0,this.myplan.x,this.myplan.y-5,"mybullet");console.log(i),this.outOfBoundsKill(i),i.enableBody(!0,this.myplan.x,this.myplan.y,!0,!0),i.setVelocity(e,t),this.bulletTime=(new Date).getTime()+200}},{key:"updateScore",value:function(e){this.score+=e,this.text.setText("Score: ".concat(this.score))}},{key:"goToOver",value:function(){this.playback.pause(),this.scene.start("over",{score:this.score})}},{key:"crashMyplane",value:function(e,t){e.disableBody(!0,!0),this.dead()}},{key:"hitMyplane",value:function(e,t){t.disableBody(!0,!0),e.level>1?e.level--:(e.disableBody(!0,!0),this.dead())}},{key:"getAward",value:function(e,t){t.disableBody(!0,!0);try{this.deng.play()}catch(i){}e.level<3&&e.level++}},{key:"dead",value:function(){var e=this;try{this.ao.play()}catch(i){}this.anims.create({key:"myplanExplode",frames:this.anims.generateFrameNumbers("myexplode",{start:0,end:2}),frameRate:30,repeat:1,hideOnComplete:!0});var t=this.add.sprite(this.myplan.x,this.myplan.y,"myexplode").setOrigin(.5,.5);t.anims.play("myplanExplode",!0),t.on("animationcomplete",(function(){e.goToOver()}),this)}}]),t}(o.a.Scene),B=function(e){function t(){var e,i;Object(u.a)(this,t);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return(i=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).makeTitle=function(e){return e<1e3?"\u98de\u673a\u5927\u6218\uff0c\u8fd8\u633a\u96be\u7684\uff0c\u6211\u624d"+e+"\u5206\uff0c\u4f60\u80fd\u5f97\u591a\u5c11\u5206\u5462\uff1f":"\u98de\u673a\u5927\u6218\uff0c\u6211\u662f\u5929\u624d\uff0c\u5f97\u4e86"+e+"\u5206\uff0c\u4e0d\u670d\u6765\u6218\uff1f"},i}return Object(b.a)(t,e),Object(y.a)(t,[{key:"create",value:function(e){var t=this;this.bg=this.add.tileSprite(0,0,2*c.width,2*c.height,"background"),this.copyright=this.add.text(c.width/2,c.height-40,"Simon contribute",{fontSize:"16px",fill:"#000"}).setOrigin(.5,.5),this.myPlan=this.add.sprite(c.width/2,c.height/2+100,"myplane").setOrigin(.5,.5),this.anims.create({key:"fly",frames:this.anims.generateFrameNumbers("myplane",{start:0,end:3}),frameRate:10,repeat:-1}),this.myPlan.anims.play("fly",!0),this.scoreText=this.add.text(c.width/2,c.height/2,"SCORE :".concat(e.score||0),{fontSize:"36px",fontWeight:"bold",fill:"#ff0000"}).setOrigin(.5,.5),this.normalback=this.sound.add("normalback",{loop:!0}),this.normalback.play(),this.restartbutton=this.add.sprite(c.width/2-45,c.height/2+200,"replaybutton").setInteractive(),this.sharebutton=this.add.sprite(c.width/2+45,c.height/2+200,"sharebutton").setInteractive(),this.anims.create({key:"replaybuttomDown",frames:[{key:"replaybutton",frame:1}],frameRate:20}),this.anims.create({key:"replaybuttomUp",frames:[{key:"replaybutton",frame:0}],frameRate:20}),this.anims.create({key:"sharebuttomDown",frames:[{key:"sharebutton",frame:1}],frameRate:20}),this.anims.create({key:"sharebuttomUp",frames:[{key:"sharebutton",frame:0}],frameRate:20}),this.restartbutton.on("pointerdown",(function(e){t.restartbutton.anims.play("replaybuttomDown")})),this.restartbutton.on("pointerup",(function(e){t.restartbutton.anims.play("replaybuttomUp"),t.scene.start("start"),t.normalback.pause()})),this.sharebutton.on("pointerdown",(function(e){t.sharebutton.anims.play("sharebuttomDown")})),this.sharebutton.on("pointerup",(function(i){t.sharebutton.anims.play("sharebuttomUp"),document.title=t.makeTitle(e.score),t.shareText=t.add.text(c.width/2+100,30,"\u70b9\u51fb\u53f3\u4e0a\u89d2\u5206\u4eab",{fontSize:"20px",fontWeight:"bold",fill:"#000"}).setOrigin(.5,.5)}))}}]),t}(o.a.Scene);var P=function(){return Object(s.useEffect)((function(){!function(){var e=new o.a.Game(c);e.scene.add("boot",g),e.scene.add("load",v),e.scene.add("main",w),e.scene.add("start",O),e.scene.add("over",B),e.scene.start("boot")}()}),[]),a.a.createElement("div",{className:"App"},a.a.createElement("div",{id:"game"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},558:function(e,t,i){e.exports=i(1483)},563:function(e,t,i){},564:function(e,t,i){}},[[558,1,2]]]);
//# sourceMappingURL=main.5984cb34.chunk.js.map